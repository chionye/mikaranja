"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{2252:(e,t,r)=>{r.d(t,{Y:()=>f,p:()=>N});var a=r(5155),o=r(6874),s=r.n(o),n=r(2115),l=r(4011),i=r(3999);function c(e){let{className:t,...r}=e;return(0,a.jsx)(l.bL,{"data-slot":"avatar",className:(0,i.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)(l._V,{"data-slot":"avatar-image",className:(0,i.cn)("aspect-square size-full",t),...r})}function u(e){let{className:t,...r}=e;return(0,a.jsx)(l.H4,{"data-slot":"avatar-fallback",className:(0,i.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...r})}var v=r(7168),g=r(3274);let f=()=>{let{logout:e,user:t}=(0,g.A)(),r=(0,n.useMemo)(()=>(null==t?void 0:t.firstName)&&(null==t?void 0:t.lastName)?"".concat(t.firstName.charAt(0)).concat(t.lastName.charAt(0)).toUpperCase():(null==t?void 0:t.username)?t.username.charAt(0).toUpperCase():"UN",[t]),o=(0,n.useMemo)(()=>"UN"!==r?"https://api.dicebear.com/8.x/api/svg?seed=".concat(r):"https://github.com/shadcn.png",[r]);return(0,a.jsx)("header",{className:"bg-stone-50 fixed top-0 left-0 right-0 p-3 border-b border-black h-16 z-10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-full",children:[(0,a.jsx)("div",{children:(0,a.jsx)(s(),{href:"/tasks",className:"text-xl font-bold text-gray-800 hover:text-gray-900 transition-colors",children:"Toodoles"})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{src:o,alt:"".concat((null==t?void 0:t.firstName)||(null==t?void 0:t.username),"'s avatar")}),(0,a.jsx)(u,{children:r})]}),(0,a.jsx)(v.$,{variant:"ghost",onClick:e,className:"text-red-600 hover:bg-red-50 hover:text-red-700 cursor-pointer",children:"Log out"})]})]})})};var h=r(2715);function m(e){let{className:t,children:r,viewport:o=!0,...s}=e;return(0,a.jsxs)(h.bL,{"data-slot":"navigation-menu","data-viewport":o,className:(0,i.cn)("group/navigation-menu relative w-full",t),...s,children:[r,o&&(0,a.jsx)(b,{})]})}function x(e){let{className:t,...r}=e;return(0,a.jsx)(h.B8,{"data-slot":"navigation-menu-list",className:(0,i.cn)("group w-full ",t),...r})}function p(e){let{className:t,...r}=e;return(0,a.jsx)(h.q7,{"data-slot":"navigation-menu-item",className:(0,i.cn)("relative",t),...r})}function b(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("absolute top-full left-0 isolate z-50 flex justify-center"),children:(0,a.jsx)(h.LM,{"data-slot":"navigation-menu-viewport",className:(0,i.cn)("origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",t),...r})})}function k(e){let{className:t,...r}=e;return(0,a.jsx)(h.N_,{"data-slot":"navigation-menu-link",className:(0,i.cn)("data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",t),...r})}(0,r(2085).F)("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1");let y=e=>{let{url:t="#",label:r,icon:o,endIcon:n}=e;return(0,a.jsxs)(s(),{href:t,className:"flex flex-row w-full items-center gap-2",children:[o,(0,a.jsx)("span",{className:"capitalize text-[16px]",children:r}),n]})};var j=r(3783);let w=[{id:(0,r(1368).A)(),label:"My Tasks",icon:(0,a.jsx)(j.A,{size:18}),url:"/tasks",items:[]}],T=e=>{let{parent:t}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{children:(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)(y,{...t})})}),(0,a.jsx)("div",{className:"border-l ml-3",children:t.items.map(e=>(0,a.jsx)(p,{children:(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)(y,{...e})})},e.id))})]})},N=()=>(0,a.jsx)("aside",{className:"bg-stone-50 w-56 h-screen fixed top-16 bottom-0 left-0 py-3 border-r border-black px-4 hidden md:block",children:(0,a.jsx)("nav",{className:"w-full",children:(0,a.jsx)(m,{children:(0,a.jsx)(x,{className:"flex flex-col w-full items-start",children:w.map(e=>{var t;return(null==(t=e.items)?void 0:t.length)===0?(0,a.jsx)(p,{children:(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)(y,{...e})})},e.id):(0,a.jsx)(T,{parent:e},e.id)})})})})})},2870:(e,t,r)=>{r.d(t,{l:()=>n});var a=r(2987);let o=(0,a.iq)(),s=(0,a.MB)(),n={getTodo:o,postTodo:s,patchTodo:(0,a.AW)(),deleteTodo:(0,a.Fb)()}},2987:(e,t,r)=>{r.d(t,{AW:()=>v,Fb:()=>g,MB:()=>u,O5:()=>i,iq:()=>d});var a=r(3464),o=r(4747);let s=o.A.BASE_URL_DEV,n=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"},timeout:1e4}),l=null,i=e=>{l=e};function c(e,t){let r={};return"string"==typeof t?r.Authorization="Bearer ".concat(t):"object"==typeof t&&Object.assign(r,t),e instanceof FormData&&r["Content-Type"]&&delete r["Content-Type"],r}function d(){return async(e,t)=>{try{let r={headers:c(void 0,null==t?void 0:t.tokenOrHeaders)};return await n.get(e,r)}catch(e){var r;throw console.error("GET Request Error:",e),(null==(r=e.response)?void 0:r.data)||e}}}function u(){return async(e,t)=>{try{let r={headers:c(null==t?void 0:t.data,null==t?void 0:t.tokenOrHeaders)};return await n.post(e,null==t?void 0:t.data,r)}catch(e){var r;throw console.error("POST Request Error:",e),(null==(r=e.response)?void 0:r.data)||e}}}function v(){return async(e,t)=>{try{let r={headers:c(null==t?void 0:t.data,null==t?void 0:t.tokenOrHeaders)};return await n.patch(e,null==t?void 0:t.data,r)}catch(e){var r;throw console.error("PATCH Request Error:",e),(null==(r=e.response)?void 0:r.data)||e}}}function g(){return async(e,t)=>{try{let r={headers:c(void 0,null==t?void 0:t.tokenOrHeaders)};return await n.delete(e,{...r})}catch(e){var r;throw console.error("DELETE Request Error:",e),(null==(r=e.response)?void 0:r.data)||e}}}n.interceptors.request.use(async e=>{var t;if(!l){let e=localStorage.getItem("userToken");e&&(l=e)}return!l||(null==(t=e.url)?void 0:t.endsWith(o.A.Login))||(e.headers.Authorization="Bearer ".concat(l)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t,r;return((null==(t=e.response)?void 0:t.status)===401||(null==(r=e.response)?void 0:r.status)===403)&&(console.warn("Unauthorized access. Clearing token and redirecting to login."),localStorage.removeItem("userToken"),localStorage.removeItem("userInfo"),i(null),i(null)),Promise.reject(e)})},3274:(e,t,r)=>{r.d(t,{A:()=>u,AuthProvider:()=>d});var a=r(5155),o=r(2115),s=r(5695),n=r(4747),l=r(2987),i=r(2870);let c=(0,o.createContext)(void 0),d=e=>{let{children:t}=e,[r,d]=(0,o.useState)(null),[u,v]=(0,o.useState)(!0),g=(0,s.useRouter)();(0,o.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("userInfo"),t=localStorage.getItem("userToken");if(e&&t){let r=JSON.parse(e);d(r),(0,l.O5)(t)}}catch(e){console.error("Failed to load auth state from storage:",e)}finally{v(!1)}})()},[]);let f=async(e,t)=>{v(!0);try{let r=await i.l.postTodo(n.A.Login,{data:{username:e,password:t}}),a=r.data;if(console.log(a),200!==r.status||!a.accessToken)return{success:!1,error:"Unexpected API response."};{let e=a.accessToken;return localStorage.setItem("userInfo",JSON.stringify(a)),localStorage.setItem("userToken",e),d(a),(0,l.O5)(e),{success:!0,error:null}}}catch(t){var r,a;let e=(null==t||null==(a=t.response)||null==(r=a.data)?void 0:r.message)||(null==t?void 0:t.message)||"Invalid credentials. Please try again.";return console.error("Login error:",t),{success:!1,error:e}}finally{v(!1)}},h=async()=>{v(!0);try{localStorage.removeItem("userInfo"),localStorage.removeItem("userToken"),d(null),(0,l.O5)(null),g.push("/")}catch(e){console.error("Logout error:",e)}finally{v(!1)}};return(0,a.jsx)(c.Provider,{value:{user:r,isLoading:u,login:f,logout:h},children:t})},u=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3999:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(2596),o=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}},4747:(e,t,r)=>{r.d(t,{A:()=>a});class a{}a.BASE_URL_DEV="https://dummyjson.com",a.Login="/auth/login",a.FetchTodo=(e,t)=>"/todos?limit=".concat(e,"&skip=").concat(t),a.FetchTodoByUserID=e=>"/todos/user/".concat(e),a.CreateTodo="/todos/add",a.UpdateTodo=e=>"/todos/".concat(e)},7001:(e,t,r)=>{r.d(t,{U:()=>c,n:()=>i});var a=r(5155),o=r(2115),s=r(2870),n=r(4747);let l=(0,o.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)([]);(0,o.useEffect)(()=>{try{let e=localStorage.getItem("tasks");if(e){let t=JSON.parse(e);i(t),console.log("TaskContext: Loaded tasks from localStorage.")}}catch(e){console.error("TaskContext: Failed to parse tasks from localStorage",e),localStorage.removeItem("tasks")}},[]);let c=(0,o.useCallback)(e=>{i(t=>{let r;return r=t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[e,...t],localStorage.setItem("tasks",JSON.stringify(r)),console.log("TaskContext: Task added/updated, localStorage updated."),r})},[]),d=(0,o.useCallback)(e=>{i(t=>{let r=new Map;t.forEach(e=>r.set(e.id,e)),e.forEach(e=>r.set(e.id,e));let a=Array.from(r.values()).sort((e,t)=>e.id-t.id);return localStorage.setItem("tasks",JSON.stringify(a)),console.log("TaskContext: Synced with API data, localStorage updated."),a})},[]),u=(0,o.useCallback)(async e=>{try{let t=await s.l.deleteTodo(n.A.UpdateTodo(e));200===t.status?(console.log("TaskContext: Task ID: ".concat(e," deleted successfully from API.")),i(t=>{let r=t.filter(t=>t.id!==e);return localStorage.setItem("tasks",JSON.stringify(r)),console.log("TaskContext: Task ID: ".concat(e," removed from local state and localStorage.")),r})):console.error("TaskContext: API delete failed for task ID: ".concat(e,". Status: ").concat(t.status),t.data)}catch(t){console.error("TaskContext: Error deleting task ID: ".concat(e," from API."),t)}},[]);return(0,a.jsx)(l.Provider,{value:{todos:r,setTodos:i,addOrUpdateTask:c,syncTodos:d,deleteTask:u},children:t})},c=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useTaskContext must be used within a TaskProvider");return e}},7168:(e,t,r)=>{r.d(t,{$:()=>i});var a=r(5155);r(2115);var o=r(9708),s=r(2085),n=r(3999);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:r,size:s,asChild:i=!1,...c}=e,d=i?o.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,n.cn)(l({variant:r,size:s,className:t})),...c})}}}]);